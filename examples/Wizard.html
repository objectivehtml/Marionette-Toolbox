<!DOCTYPE html>

<html>
	<head>
		<link rel="stylesheet" href="../resources/bootstrap-3.3.2-dist/css/bootstrap.css">
		<link rel="stylesheet" href="../resources/bootstrap-3.3.2-dist/css/bootstrap-theme.css">
		<link rel="stylesheet" href="../resources/font-awesome-4.3.0/css/font-awesome.css">
		<link rel="stylesheet" href="../dist/marionette.toolbox.css">

		<script src="../resources/vendor.js"></script>

		<script type="text/javascript">
			var $ = require('jquery');
			var _ = require('underscore');
			var Backbone = require('backbone');
			var Marionette = require('backbone.marionette');
			var Handlebars = require('handlebars');
			var Spinner = require('spin.js');
		</script>

		<script src="../dist/marionette.toolbox.js"></script>
	</head>
	<body>
		<div id="app-wrapper" class="container"></div>

		<script type="text/handlebars" id="step-1">
		<p>Nunc aliquet libero non dui maximus lacinia. Aliquam porta mi vel massa posuere, egestas bibendum justo congue. Nullam quis leo ut elit convallis sagittis sagittis vel diam. Curabitur vehicula vitae massa non ultrices. Maecenas tempor porta molestie. Pellentesque ac elit mi. Integer semper pharetra libero nec condimentum. Quisque ultrices id tortor non bibendum. Cras eget lorem hendrerit, faucibus velit ac, sollicitudin mi. Nulla id libero orci.</p>

		<p>Vestibulum sed tincidunt tellus, non ultrices odio. Vivamus at nisi felis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam tristique sem eu varius dictum. Aliquam tincidunt dapibus faucibus. Sed bibendum quam at massa cursus, vel vulputate purus vestibulum. Mauris tempor bibendum finibus. Suspendisse accumsan maximus urna, ac placerat mi rutrum placerat.</p>
		</script>

		<script type="text/javascript">
			var App = new Marionette.Application({
				region: '#app-wrapper'
			});

			App.on('start', function() {

				var Step1 = Toolbox.View.extend({
					template: function() {
						return $('#step-1').html();
					},
					onWizardClickNext: function() {
						var wizard = this.getOption('wizard');

						wizard.finish(false);

						return false;

						wizard.showActivityIndicator();

						setTimeout(function() {
							wizard.next();
						}, 500);

						return false;
					}
				});

				var step1 = new Step1({
					title: 'Step 1'
				});

				var Step2 = Toolbox.View.extend({
					title: 'Step 2',
					regions: {
						view1: '.view-1',
						view2: '.view-2'
					},
					template: function() {
						return [
							'<h2>Step 2</h2>',
							'<div class="row">',
								'<div class="col-sm-6 view-1"></div>',
								'<div class="col-sm-6 view-2"></div>',
							'</div>'
						].join('');
					},
					onDomRefresh: function() {
						var View1 = Toolbox.View.extend({
							template: function() {
								return 'View 1';
							}
						});

						var View2 = Toolbox.View.extend({
							template: function() {
								return 'View 2';
							}
						});

						this.showChildView('view1', new View1);
						this.showChildView('view2', new View2);
					}
				});

				var step2 = new Step2();

				var Step3 = Toolbox.View.extend({
					title: 'Step 3',
					template: function() {
						return 'Step 3';
					},
					onWizardClickFinish: function() {
						view.disableFinishButton();

						view.showActivityIndicator({
							label: 'Testing...'
						});

						setTimeout(function() {
							view.finish();
						}, 1000);

						return false;
					}
				});

				var step3 = new Step3();

				var view = new Toolbox.Wizard({
					header: 'Step by Step',
					step: 1,
					steps: [step1, step2, step3],
					panel: false,
					buttonViewOptions: {
						buttonSizeClassName: 'btn-lg'
					}
				});


				App.showView(view);

			});

			App.start();

		</script>

	</body>
</html>
